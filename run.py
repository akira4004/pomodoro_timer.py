#!/usr/bin/env python3
"""
POMODORO –¢–ê–ô–ú–ï–† –î–õ–Ø –£–¢–†–ï–ù–ù–ï–ô –ó–ê–†–Ø–î–ö–ò
–ì–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
"""

import os
import sys
from pomodoro_manager import PomodoroManager

def clear_screen():
    """–û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞ –∫–æ–Ω—Å–æ–ª–∏"""
    os.system('cls' if os.name == 'nt' else 'clear')

def display_welcome():
    """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞"""
    clear_screen()
    print("üåü" * 30)
    print("üéØ          POMODORO –¢–ê–ô–ú–ï–† –î–õ–Ø –£–¢–†–ï–ù–ù–ï–ô –ó–ê–†–Ø–î–ö–ò          üéØ")
    print("üåü" * 30)
    print()
    print("üí™ –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –≤–∞—à—É —É—Ç—Ä–µ–Ω–Ω—é—é –∑–∞—Ä—è–¥–∫—É –≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!")
    print("üîÑ –ß–µ—Ä–µ–¥—É–π—Ç–µ –ø–µ—Ä–∏–æ–¥—ã —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –∏ –æ—Ç–¥—ã—Ö–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞")
    print("üìä –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ –æ—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏!")
    print()

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã"""
    manager = PomodoroManager("config.json")
    
    while True:
        display_welcome()
        
        print("üìù –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ:")
        print("1. üéØ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ä–µ–∂–∏–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏")
        print("2. üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (20/5)")
        print("3. ‚ö° –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–∫—Å–ø—Ä–µ—Å—Å-–∑–∞—Ä—è–¥–∫—É (10/2)") 
        print("4. ‚öñÔ∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º (15/3)")
        print("5. üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–∞–π–º–µ—Ä")
        print("6. üìä –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–≥–æ —Ç–∞–π–º–µ—Ä–∞")
        print("7. üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (10—Å–µ–∫/5—Å–µ–∫)")
        print("8. ‚ùå –í—ã–π—Ç–∏ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã")
        print()
        
        try:
            choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1-8): ").strip()
            
            if choice == "1":
                clear_screen()
                manager.list_presets()
                input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é...")
                
            elif choice == "2":
                clear_screen()
                print("üöÄ –ó–∞–ø—É—Å–∫ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞...")
                if manager.start_timer_by_id("classic_20_5"):
                    input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É...")
                    manager.stop_current_timer()
                
            elif choice == "3":
                clear_screen()
                print("‚ö° –ó–∞–ø—É—Å–∫ –≠–∫—Å–ø—Ä–µ—Å—Å-–∑–∞—Ä—è–¥–∫–∏...")
                if manager.start_timer_by_id("express_10_2"):
                    input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É...")
                    manager.stop_current_timer()
                    
            elif choice == "4":
                clear_screen()
                print("‚öñÔ∏è –ó–∞–ø—É—Å–∫ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞...")
                if manager.start_timer_by_id("standard_15_3"):
                    input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É...")
                    manager.stop_current_timer()
                    
            elif choice == "5":
                manager.stop_current_timer()
                input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")
                
            elif choice == "6":
                clear_screen()
                manager.display_current_status()
                input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")
                
            elif choice == "7":
                clear_screen()
                print("üß™ –ó–∞–ø—É—Å–∫ –¢–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞...")
                if manager.start_timer_by_id("quick_test"):
                    input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ç–µ—Å—Ç...")
                    manager.stop_current_timer()
                    
            elif choice == "8":
                manager.stop_current_timer()
                print("\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üí™")
                break
                
            else:
                print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç 1 –¥–æ 8.")
                input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")
                
        except KeyboardInterrupt:
            print("\n\nüëã –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã...")
            manager.stop_current_timer()
            break
        except Exception as e:
            print(f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")
            input("\n‚Üµ –ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...")

if __name__ == "__main__":
    main()
